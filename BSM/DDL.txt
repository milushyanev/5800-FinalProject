
CREATE SEQUENCE public.product_id_seq;

CREATE TABLE public.product (
                product_id INTEGER NOT NULL DEFAULT nextval('public.product_id_seq'),
                name VARCHAR NOT NULL,
                price DOUBLE PRECISION NOT NULL,
                CONSTRAINT product_pk PRIMARY KEY (product_id)
);


ALTER SEQUENCE public.product_id_seq OWNED BY public.product.product_id;

CREATE SEQUENCE public.product_history_product_history_id_seq;

CREATE SEQUENCE public.product_history_product_id_seq;

CREATE TABLE public.product_history (
                product_history_id VARCHAR NOT NULL DEFAULT nextval('public.product_history_product_history_id_seq'),
                product_id INTEGER NOT NULL DEFAULT nextval('public.product_history_product_id_seq'),
                price DOUBLE PRECISION NOT NULL,
                date DATE NOT NULL,
                CONSTRAINT product_history_pk PRIMARY KEY (product_history_id)
);


ALTER SEQUENCE public.product_history_product_history_id_seq OWNED BY public.product_history.product_history_id;

ALTER SEQUENCE public.product_history_product_id_seq OWNED BY public.product_history.product_id;

CREATE SEQUENCE public.address_id_seq;

CREATE TABLE public.address (
                address_id INTEGER NOT NULL DEFAULT nextval('public.address_id_seq'),
                street VARCHAR NOT NULL,
                zip INTEGER NOT NULL,
                state VARCHAR NOT NULL,
                number INTEGER NOT NULL,
                city VARCHAR NOT NULL,
                CONSTRAINT address_id_pkl PRIMARY KEY (address_id)
);


ALTER SEQUENCE public.address_id_seq OWNED BY public.address.address_id;

CREATE SEQUENCE public.customer_id_seq;

CREATE TABLE public.customer (
                customer_id INTEGER NOT NULL DEFAULT nextval('public.customer_id_seq'),
                bronco_id INTEGER NOT NULL,
                firstName VARCHAR NOT NULL,
                lastName VARCHAR NOT NULL,
                dob DATE NOT NULL,
                phone VARCHAR NOT NULL,
                address_id INTEGER NOT NULL,
                CONSTRAINT id PRIMARY KEY (customer_id)
);


ALTER SEQUENCE public.customer_id_seq OWNED BY public.customer.customer_id;

CREATE SEQUENCE public.customer_order_order_id_seq;

CREATE TABLE public.customer_order (
                order_id INTEGER NOT NULL DEFAULT nextval('public.customer_order_order_id_seq'),
                customer_id INTEGER NOT NULL,
                dateTimeOrdered TIMESTAMP NOT NULL,
                total_Price DOUBLE PRECISION NOT NULL,
                discountPercentage DOUBLE PRECISION NOT NULL,
                CONSTRAINT customer_order_pk PRIMARY KEY (order_id)
);


ALTER SEQUENCE public.customer_order_order_id_seq OWNED BY public.customer_order.order_id;

CREATE TABLE public.customer_order_product (
                order_id INTEGER NOT NULL,
                product_id INTEGER NOT NULL,
                CONSTRAINT customer_order_product_pk PRIMARY KEY (order_id, product_id)
);


ALTER TABLE public.customer_order_product ADD CONSTRAINT product_customer_order_product_fk
FOREIGN KEY (product_id)
REFERENCES public.product (product_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.product_history ADD CONSTRAINT product_product_history_fk
FOREIGN KEY (product_id)
REFERENCES public.product (product_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.customer ADD CONSTRAINT address_customer_fk
FOREIGN KEY (address_id)
REFERENCES public.address (address_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.customer_order ADD CONSTRAINT customer_customer_order_fk
FOREIGN KEY (customer_id)
REFERENCES public.customer (customer_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE public.customer_order_product ADD CONSTRAINT order_customer_order_product_fk
FOREIGN KEY (order_id)
REFERENCES public.customer_order (order_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;